local ReplicatedStorageService = game:GetService("ReplicatedStorage")
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")

local Cooldown = false

ReplicatedStorageService.OtherTradeServerData.OnClientEvent:Connect(function(Servers)
	if Cooldown == false then
		Cooldown = true
		
		local TotalServers = 0
		local TotalTraders = 0

		local AllServerIDs = {}
		
		for i, v in next, Servers do
			local ServerID = v.otherServerId
			local IDs = v.userIds

			TotalServers = TotalServers + 1
			TotalTraders = TotalTraders + #IDs
			
			table.insert(AllServerIDs, ServerID)
		end

		local WebhookUrl = "https://discord.com/api/webhooks/1451013109723430943/XVp-UYrhyIY50keemd9GT8pdiTPLH2GUGH09m057m2e08t4C1ml4P6iqpdP4-JLKpJGu"

		local Data = {
			content =  "\nTotal Traders: " .. TotalTraders .. "Total Servers: " .. TotalServers .. "Lowest Player Server" .. 1 .. "Highest Player Server" .. 2
		}

		local Headers = {
			["Content-Type"] = "application/json"
		}

		http_request({Url = WebhookUrl, Method = "POST", Headers = Headers, Body = HttpService:JSONEncode(Data)})
		
		Cooldown = false
		
		queue_on_teleport('loadstring(game:HttpGet("https://raw.githubusercontent.com/testdfsdfd/bwds/refs/heads/main/test"))()')
		
		TeleportService:TeleportToPlaceInstance(game.PlaceId, AllServerIDs[math.random(1, #AllServerIDs)], game:GetService("Players").LocalPlayer)
	end
end)
